<header>
    <h1>Dashboard</h1>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FishWiki - Login</title>
    <link rel="stylesheet" href="style/login.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="scripts/login.js"></script>
</header>

<div id="form">

<div class="fish" id="fish"></div>
<div class="fish" id="fish2"></div>

<form id="waterform" method="post">

<div class="formgroup" id="name-form">
    <label for="email">Your email address*</label>
    <input type="text" id="email" name="email" />
</div>

<div class="formgroup" id="email-form">
    <label for="password">Your password*</label>
    <input type="password" id="password" name="password" />
</div>

    <input type="submit" value="Login" /> <br>
   <a href="index.html"> Back to home </a>
</form>
<script>
  ddocument.addEventListener("DOMContentLoaded", function() {
    const apiUrl = 'http://127.0.0.1:8000/api';
    const loginForm = document.getElementById('waterform');

    function login(email, password) {
        return axios.post(`${apiUrl}/login`, { email: email, password: password }, {
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*' 
            }
        });
    }

    loginForm.addEventListener('submit', function (event) {
        event.preventDefault();

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        login(email, password)
        .then(response => {
            console.log('Login successful');
            localStorage.setItem('accessToken', response.data.token);
            window.location.href = 'dashboard.html';
        })
        .catch(error => {
            console.error('Login failed:', error);
            alert('Login failed. Please check your email and password.');
        });
    });
});



</script>
</div>
